{% block pager %}
{% if paginator.page_count!=1 %}
<div class="pager">
{{paginator.pager(format='~5~')}}
</div>
{% endif %}
{% endblock %}

<h2>Your chats</h2>

<ul>
{% if type == None: %}
  <li>All chats</li>
{% else: %}
  <li><a href="{{url_for("chat_list")}}">All chats</a></li>
{% endif %}
{% if type == "1-on-1": %}
  <li>1-on-1 chats</li>
{% else: %}
  <li><a href="{{url_for("chat_list", type="1-on-1")}}">1-on-1 chats</a></li>
{% endif %}
{% if type == "group": %}
  <li>Group chats</li>
{% else: %}
  <li><a href="{{url_for("chat_list", type="group")}}">Group chats</a></li>
{% endif %}
{% if type == "pm": %}
  <li>PM chats</li>
{% else: %}
  <li><a href="{{url_for("chat_list", type="pm")}}">PM chats</a></li>
{% endif %}
{% if type == "unread": %}
  <li>Unread chats</li>
{% else: %}
  <li><a href="{{url_for("chat_list", type="unread")}}">Unread chats</a></li>
{% endif %}
</ul>

{{ self.pager() }}

<ul>
{% for c in chats: %}
  <li><a href="{% if c[1].type == "pm": %}{{url_for("chat", url="pm/"+c[2].user.username)}}{% else: %}{{url_for("chat", url=c[1].url)}}{% endif %}">
{% if c[1].type == "pm": %}
    Messaging {{c[2].user.username}}
{% elif c[1].type == "group": %}
    {{c[1].title}}
{% else: %}
    {{c[1].url}}
{% endif %}
{% if c[1].last_message > c[0].last_online: %}    (unread){% endif %}
  </a></li>
{% endfor %}
</ul>

{{ self.pager() }}
