{% extends "base.html" %}
{% block title%}Group chats - {% endblock %}
{% block content %}
    <div class="toggle_box">
        <input type="checkbox" id="toggle_create_chat"{% if "create_chat_error" in request.args: %} checked="checked"{% endif %}>
        <h2>&gt; <label for="toggle_create_chat">Create a group chat</label></h2>
        {% if "create_chat_error" in request.args: %}
        {% if request.args["create_chat_error"] == "url_invalid": %}
        <p class="error">That URL isn't valid. Chat URLs can only contain letters, numbers, hyphens and underscores.</p>
        {% elif request.args["create_chat_error"] == "url_taken": %}
        <p class="error">That URL has already been taken.</p>
        {% endif %}
        {% endif %}
        <form action="{{url_for("rp_create_chat")}}" method="post">
            <p><label>URL: <input type="text" name="url" maxlength="50" required></label> <button type="submit">Create</button></p>
        </form>
    </div>
    <h2>&gt; Existing group chats</h2>
    <!-- needz moar back end code for filtering by level -->
    <!--<form action="#" method="get">
        <p>
            <label>Show: <select name="level">
                <option value="sfw">SFW only</option>
                <option value="all">SFW and NSFW</option>
                <option value="nsfw">NSFW only</option>
            </select></label>
            <button type="submit">Show</button>
        </p>
    </form>-->
    <ul class="chat_list">
        {% for room in rooms: %}
        <li>
            <h3><a href="{{url_for("rp_chat", url=room.url)}}">{{room.title}}</a></h3>
            <p class="subtitle">{{ {"sfw": "SFW", "nsfw": "NSFW", "nsfw-extreme": "NSFW extreme"}[room.level] }}, {{room.online}} online.</p>
            {% if room.topic != "": %}
            <p>{{room.topic}}</p>
            {% endif %}
        </li>
        {% endfor %}
    </ul>
{% endblock %}

